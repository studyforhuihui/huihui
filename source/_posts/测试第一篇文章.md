---
title: 测试文章
---

# 前端使用 pdf 预览

## 1. 使用 pdf.js

### 1.1 下载 pdf.js

[下载地址](https://mozilla.github.io/pdf.js/getting_started/)

### 1.2 引入 pdf.js

```html
<script src="path/to/pdf.js"></script>
```

### 1.3 使用 pdf.js

```html
<canvas id="pdf-canvas"></canvas>
<script>
  var url = "path/to/pdf.pdf";
  var pdfjsLib = window["pdfjs-dist/build/pdf"];
  pdfjsLib.GlobalWorkerOptions.workerSrc = "path/to/pdf.worker.js";
  var loadingTask = pdfjsLib.getDocument(url);
  loadingTask.promise.then(function (pdf) {
    console.log("PDF loaded");
    // Fetch the first page
    var pageNumber = 1;
    pdf.getPage(pageNumber).then(function (page) {
      console.log("Page loaded");
      var scale = 1.5;
      var viewport = page.getViewport({ scale: scale });
      // Prepare canvas using PDF page dimensions
      var canvas = document.getElementById("pdf-canvas");
      var context = canvas.getContext("2d");
      canvas.height = viewport.height;
      canvas.width = viewport.width;
      // Render PDF page into canvas context
      var renderContext = {
        canvasContext: context,
        viewport: viewport,
      };
      var renderTask = page.render(renderContext);
      renderTask.promise.then(function () {
        console.log("Page rendered");
      });
    });
  });
</script>
```

## 2. 使用 pdf.js 和 vue

### 2.1 安装 pdf.js

```bash
npm install pdfjs-dist
```

### 2.2 在 vue 组件中使用 pdf.js

```vue
<template>
  <div>
    <canvas id="pdf-canvas"></canvas>
  </div>
</template>

<script>
import pdfjsLib from 'pdfjs-dist';

export default {
  mounted() {
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://mozilla.github.io/pdf.js/build/pdf.worker.js';
    var url = 'path/to/your/pdf/file.pdf';
    pdfjsLib.getDocument(url).promise.then(function(pdf) {
      console.log('PDF loaded');
}
      pdf.getPage(1).then(function(page) {
        console.log('Page loaded');
        var scale = 1.5;
        var viewport = page.getViewport({ scale: scale });
        // Prepare canvas using PDF page dimensions
        var canvas = document.getElementById('pdf-canvas');
        var context = canvas.getContext('2d');
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        // Render PDF page into canvas context
        var renderContext = {
          canvasContext: context,
          viewport: viewport
        };
        var renderTask = page.render(renderContext);
        renderTask.promise.then(function () {
          console.log('Page rendered');
        });
      });
    });
  }
}
</script>
```

## 3. 使用 pdf.js 和 react

### 3.1 安装 pdf.js

```bash
npm install pdfjs-dist
```

### 3.2 使用 pdf.js

```jsx
import React, { useRef, useEffect } from "react";
import pdfjsLib from "pdfjs-dist/webpack";

pdfjsLib.GlobalWorkerOptions.workerSrc = "https://mozilla.github.io/pdf.js/build/pdf.worker.js";

const PDFViewer = ({ url }) => {
  const canvasRef = useRef(null);

  useEffect(() => {
    const loadPdf = async () => {
      const pdf = await pdfjsLib.getDocument(url).promise;
      const page = await pdf.getPage(1);
      const viewport = page.getViewport({ scale: 1.5 });
      const canvas = canvasRef.current;
      const context = canvas.getContext("2d");
      canvas.height = viewport.height;
      canvas.width = viewport.width;
      const renderContext = {
        canvasContext: context,
        viewport: viewport,
      };
      await page.render(renderContext).promise;
    };

    loadPdf();
  }, [url]);

  return <canvas ref={canvasRef} />;
};

export default PDFViewer;
```

### 3.3 使用 react

```jsx
import React from "react";
import PDFViewer from "./PDFViewer";

const App = () => {
  const url = "https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf";

  return (
    <div>
      <h1>PDF Viewer</h1>
      <PDFViewer url={url} />
    </div>
  );
};

export default App;
```

### 3.4 使用 react-dom

```jsx
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";

ReactDOM.render(<App />, document.getElementById("root"));
```

### 3.5 使用 webpack

```javascript
const path = require("path");

module.exports = {
  entry: "./src/index.js",
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "bundle.js",
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
          loader: "babel-loader",
          options: {
            presets: ["@babel/preset-env", "@babel/preset-react"],
          },
        },
      },
    ],
  },
  devServer: {
    contentBase: path.join(__dirname, "dist"),
    compress: true,
    port: 9000,
  },
};
```

### 3.6 使用 babel-loader

```javascript
{
  test: /\.js$/,
  exclude: /node_modules/,
  use: {
    loader: 'babel-loader',
    options: {
      presets: ['@babel/preset-env', '@babel/preset-react'],
    },
  },
}
```

### 3.7 使用 react-dom

```jsx
import React from "react";
import ReactDOM from "react-dom";
import App from "./App";

ReactDOM.render(<App />, document.getElementById("root"));
```

### 3.8 使用 webpack

```javascript
const path = require("path");

module.exports = {
  entry: "./src/index.js",
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "bundle.js",
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
          loader: "babel-loader",
          options: {
            presets: ["@babel/preset-env", "@babel/preset-react"],
          },
        },
      },
    ],
  },
  devServer: {
    contentBase: path.join(__dirname, "dist"),
    compress: true,
    port: 9000,
  },
};
```

### 3.9 使用 react-router-dom

```jsx
import React from "react";
import ReactDOM from "react-dom";
import { BrowserRouter as Router, Route, Switch } from "react-router-dom";
import App from "./App";

ReactDOM.render(
  <Router>
    <Switch>
      <Route path="/" component={App} />
    </Switch>
  </Router>,
  document.getElementById("root")
);
```

### 3.10 使用 redux

```jsx
import React from "react";
import ReactDOM from "react-dom";
import { Provider } from "react-redux";
import { createStore } from "redux"; // 引入redux
import rootReducer from "./reducers"; // 引入reducer
import App from "./App";

const store = createStore(rootReducer);

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root")
);
```

### 3.11 使用 redux-thunk

```jsx
import { createStore, applyMiddleware } from "redux"; // 引入redux
```
